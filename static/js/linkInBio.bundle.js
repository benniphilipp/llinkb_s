(()=>{"use strict";function e(e){let t=null;if(document.cookie&&""!==document.cookie){const o=document.cookie.split(";");for(let n=0;n<o.length;n++){const i=o[n].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}const t=class{constructor(){this.LinkInBioLinksListView=document.querySelector("#LinkInBioLinksListView"),this.LinkInBioLinksListView&&(this.cardContainer=document.querySelector("#card-container"),this.loaderImage=document.querySelector(".loader-image"),this.urlForm=document.querySelector("#valueUrlSort").value),this.isListViewRendered=!1,this.csrftoken=e("csrftoken"),this.initSortable(),this.isListViewRendered=!1,this.linklistview()}events(){}renderCard(e){const t="flexSwitchCheck"+(e.is_aktiv?"Active":"Inactive"),o=document.getElementById("deleteLinkinLink").value.replace(/0/g,e.id);return`\n        <div class="card border-0 shadow-sm mb-3 sortable-grabel sortable-item" data-id="${e.id}">\n            <div class="card-body">\n                <div class="row" id="linkInBioCardForm${e.id}">\n                    <div class="col-1">\n                        <div class="d-flex mb-3 linkin-bio-hover align-items-center h-100">\n                            <i class="fa-solid fa-grip-vertical"></i>\n                        </div>\n                    </div>\n                    <div class="col-11">\n                        <div class="d-flex align-items-center justify-content-between">\n                            <h5 class="mb-0">${e.button_label}</h5>\n                            <div>\n                                <button type="button" class="btn btn-primary btn-sm linkinbio-editcard" data-linkinbio-editcard="${e.id}"><i class="fa-solid fa-pen"></i></button>\n                                <button type="button" data-toggle="modal" data-target="#exampleModal" class="btn btn-danger btn-sm linkinbio-trash" data-url-trash="${o}" data-linkinbio-editcard="${e.id}" data-linkinbio-titel="${e.button_label}"><i class="fa-solid fa-trash"></i></button>\n                            </div>\n                        </div>\n                        <div class="d-flex mt-3">\n                            <a class="linkinbio" href="${e.url_destination}" target="_blank">${e.url_destination}</a>\n                        </div>\n                        <div class="d-flex justify-content-between align-items-center mt-3">\n                            <div class="d-flex align-items-center">\n                                <i class="fa-solid fa-chart-line linkinbio-icon"></i>\n                                <small class="mx-2 textsmall">1</small>\n                            </div>\n                            <div class="form-check form-switch d-flex justify-content-end">\n                                <input class="form-check-input linkinbio-switch" data-linkinbio-switch="${e.id}" type="checkbox" role="switch" id="${t}" ${e.is_aktiv?"checked":""}>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        `}linklistview(){this.LinkInBioLinksListView&&!this.isListViewRendered&&(this.isListViewRendered=!0,$(this.cardContainer).empty(),this.loaderImage.classList.remove("d-none"),setTimeout((()=>{$.ajax({url:this.LinkInBioLinksListView.value,type:"GET",dataType:"json",success:e=>{for(var t=0;t<e.links.length;t++){var o=e.links[t],n=this.renderCard(o);$(this.cardContainer).append($(n))}$(this.loaderImage.classList.add("d-none"))},error:(e,t,o)=>{console.error("Fehler:",o)}})}),1e3))}initSortable(){const e=this;$(this.cardContainer).sortable({axis:"y",update:function(t,o){const n=$(this).find(".sortable-item").map((function(){return $(this).attr("data-id")})).get();e.saveSortOrder(n)}}),$(this.cardContainer).disableSelection()}saveSortOrder(e){$.ajax({url:this.urlForm,type:"POST",data:{sorted_links:e},headers:{"X-CSRFToken":this.csrftoken},success:function(e){console.log("Reihenfolge erfolgreich gespeichert.")},error:function(e,t,o){console.error("Fehler beim Speichern der Reihenfolge:",o)}})}};function o(e){const t=gettext("Report");$("#toast-alert").html(`\n        <div class="ls-toast" id="ls-toas">\n            <div class="ls-toas-header d-flex justify-content-start align-items-center px-2 py-2">\n                <svg class="bd-placeholder-img rounded me-2" width="20" height="20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false"><rect width="100%" height="100%" fill="#007aff"></rect></svg>\n                <span><b>${t}</b></span>\n                <i class="fa-solid fa-xmark ms-auto"></i>\n            </div>\n            <hr>\n            <div class="ls-toas-body p-2">\n                ${e}\n            </div>\n        </div>\n    `),setTimeout((function(){$("#toast-alert").html("")}),4e3)}const n=class{constructor(){this.linkinbioEditScrenn(),this.sozialprofilelist(),this.SortableUlrSocial(),this.socialplattformEmpty(),this.csrftoken=e("csrftoken"),this.addElementButton=document.querySelector("#addElementButton"),this.addElementButton&&this.addElementButton.addEventListener("click",(()=>{this.addSocialMediaPlatforms()}));const t=document.querySelector("#elementContainer");t&&(t.addEventListener("change",this.handleSelectChange.bind(this)),t.addEventListener("input",this.handleInput.bind(this)),t.addEventListener("click",this.handleButtonUpdate.bind(this)),t.addEventListener("click",this.handleButtonDelete.bind(this)));const o=document.getElementById("urlsDelete");o&&o.addEventListener("click",this.modalButtonDelete.bind(this)),this.uniqueIdCounter=0,this.selectedPlatform=null,this.inputFieldId=null}handleSelectChange(e){const t=e.target;if("SELECT"===t.tagName){const e=t.options[t.selectedIndex].getAttribute("data-platform"),o=t.id.replace("socialSelectFieldId","");document.getElementById(`urlSocial${o}`).classList.add(this.selectedPlatform),this.selectedPlatform=e}}handleInput(e){const t=e.target,o=t.value;this.selectedPlatform&&(this.validateURL(this.selectedPlatform,o)?(this.saveData(this.selectedPlatform,o),t.style.borderColor=""):t.style.borderColor="#dc3545")}saveData(e,t){if(e&&t){var n=$("#linkinbio_page_id_custome").val();const i=$("#urlSocial").val();$.ajax({url:i,type:"POST",data:{url_social:t,link_in_bio_id:n,social_media_platform:e},headers:{"X-CSRFToken":this.csrftoken},success:e=>{e.success?(o(translations["URL erfolgreich gespeichert."]),this.sozialprofilelist()):console.error("Fehler beim Speichern der URL:",e.message)},error:function(e,t,o){console.error("Fehler beim Speichern der URL:",o)}})}}validateURL(e,t){switch(e){case"Facebook":return this.isFacebookURL(t);case"Instagram":return this.isInstagramURL(t);case"YouTube":return this.isYoutubeURL(t);case"Vimeo":return this.isVimeoURL(t);case"Twitter":return this.isTwitterURL(t);case"Twitch":return this.isTwitchURL(t);case"TikTok":return this.istTikTokURL(t);case"Reddit":return this.istRedditURL(t);case"Tumblr":return this.istTumblrURL(t);case"Snapchat":return this.isSnapchatUrl(t);case"Discord":return this.isDiscordUrl(t);case"LinkedIn":return this.isLinkedInUrl(t);case"Xing":return this.isXingUrl(t);default:return!1}}isFacebookURL(e){return/^(https?:\/\/)?(www\.)?facebook\.com\/.*/i.test(e)}isInstagramURL(e){return/^(https?:\/\/)?(www\.)?instagram\.com\/.*/i.test(e)}isYoutubeURL(e){return/^(https?:\/\/)?(www\.)?youtube\.com\/.*/i.test(e)}isVimeoURL(e){return/^(https?:\/\/)?(www\.)?vimeo\.com\/.*/i.test(e)}isTwitterURL(e){return/^(https?:\/\/)?(www\.)?twitter\.com\/.*/i.test(e)}isTwitchURL(e){return/^(https?:\/\/)?(www\.)?twitch\.com\/.*/i.test(e)}istTikTokURL(e){return/^(https?:\/\/)?(www\.)?tiktok\.com\/.*/i.test(e)}istRedditURL(e){return/^(https?:\/\/)?(www\.)?reddit\.com\/.*/i.test(e)}istTumblrURL(e){return/^(https?:\/\/)?(www\.)?tumblr\.com\/.*/i.test(e)}isSnapchatUrl(e){return/^(https?:\/\/)?(www\.)?snapchat\.com\/.*/i.test(e)}isDiscordUrl(e){return/^(https?:\/\/)?(www\.)?discord\.com\/.*/i.test(e)}isLinkedInUrl(e){return/^(https?:\/\/)?(www\.)?linkedin\.com\/.*/i.test(e)}isXingUrl(e){return/^(https?:\/\/)?(www\.)?xing\.com\/.*/i.test(e)}elementSocial(e){return`\n        <div class="card border-0 mt-4 p-3 shadow-sm">\n            <div class="card-body p-0">\n                <div class="row">\n                    <div class="col-sm-1 d-flex justify-content-start align-items-center">\n                        <i class="fa-solid fa-grip-vertical"></i>\n                    </div>\n                    <div class="col-sm-5">\n                        <select class="form-select platform-select" id="socialSelectFieldId${e}" name="platform">\n                            \x3c!-- Optionen werden hier dynamisch hinzugefügt --\x3e\n                        </select>\n                    </div>\n                    <div class="col-sm-6">\n                        <div class="form-group">\n                            <input type="text" class="form-control url_social" id="urlSocial${e}" placeholder="Url">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        `}addSocialMediaPlatforms(){const e=document.querySelector("#elementContainer"),t=document.querySelector("#getSocialMdiaPlatforms"),o=this.elementSocial(this.uniqueIdCounter);$(e).append($(o)),this.uniqueIdCounter++;const n=$("#linkinbio_page_id_custome").val();$.ajax({url:t.value,type:"GET",dataType:"json",data:{link_in_bio_page_id:n},headers:{"X-CSRFToken":this.csrftoken},success:e=>{var t=$("#elementContainer").find(".platform-select").last();$.each(e.platforms,(function(e,o){var n=$("<option>",{value:o.id,text:o.name,"data-platform":o.name});n.addClass("platform"),t.append(n)})),t.prepend($("<option>",{value:"",text:"Plattform wählen"})),t.val(""),console.log("Update"),this.socialplattformEmpty()},error:function(e,t,o){console.error("Fehler:",o)}})}sozialprofilelist(){const e=document.querySelector("#UrlSocialProfilesViewList"),t=document.querySelector("#elementContainer");e&&$.ajax({url:e.value,type:"GET",dataType:"json",success:e=>{t.innerHTML="",e.social_media.forEach((e=>{const o=this.UpdateelementSocial(e.platform,e.url,e.id,e.selected,e.order);t.insertAdjacentHTML("beforeend",o)}))},error:(e,t,o)=>{console.error("Fehler:",o)}})}UpdateelementSocial(e,t,o,n,i){return`\n        <div class="card border-0 mt-4 p-3 shadow-sm sortable-item" data-id="${o}">\n            <div class="card-body p-0">\n                <div class="row">\n                    <div class="col-1 d-flex justify-content-center align-items-center p-0">\n                        <i class="fa-solid fa-grip-vertical"></i>\n                    </div>\n                    <div class="col-3">\n                        <select class="form-select update-platform-select" id="socialSelectFieldId${o}">\n                            <option value="${e}" data-platform="${e}" ${n?"selected":""}>${e}</option>\n                        </select>\n                    </div>\n                    <div class="col-6 p-0">\n                        <div class="form-group">\n                            <input type="text" class="form-control url_social" id="urlSocial${o}" value="${t}">\n                        </div>\n                    </div>\n                    <div class="col-2 d-flex justify-content-center align-items-center p-0">\n                        <button class="btn btn-primary btn-sm mx-1 sozial-update" data-url-update="${o}"><i class="fa-solid fa-pen"></i></button>\n                        <button class="btn btn-danger btn-sm sozial-delete" data-url-delete="${o}"><i class="fa-solid fa-trash"></i></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        `}handleButtonUpdate(e){const t=e.target.closest(".sozial-update");if(t){const e=t.getAttribute("data-url-update"),o=document.querySelector("#urlSocial"+e).value;this.sozialprofilurlsupdate(e,o)}}sozialprofilurlsupdate(e,t){const n=document.querySelector("#UrlSocialProfilesUpdateView"),i=new FormData;i.append("url_social_id",e),i.append("url_social",t),$.ajax({type:"POST",url:n.value,data:i,contentType:"application/json",processData:!1,contentType:!1,headers:{"X-CSRFToken":this.csrftoken},success:e=>{o(e.message),this.sozialprofilelist()},error:function(e,t,o){console.error("Fehler bei der Ajax-Anfrage:",o)}})}handleButtonDelete(e){const t=e.target.closest(".sozial-delete");if(t){const e=t.getAttribute("data-url-delete");this.openModalDeleteUrl(e)}}openModalDeleteUrl(e){document.getElementById("urlsDelete").setAttribute("data-custom-attribute",e),$("#exampleUrls").modal("show")}modalButtonDelete(){const e=document.querySelector("#urlsDelete");if(e){const t=e.getAttribute("data-custom-attribute");this.sozialprofilurlsdelete(t)}}sozialprofilurlsdelete(e){const t=document.querySelector("#UrlSocialProfilesDeleteView");$.ajax({url:t.value,type:"POST",data:{url_social_id:e},headers:{"X-CSRFToken":this.csrftoken},success:e=>{$("#exampleUrls").modal("hide"),o(e.social_media_delete),this.sozialprofilelist(),this.socialplattformEmpty()},error:function(e,t,o){console.error("Fehler beim Speichern der URL:",o)}})}linkinbioEditScrenn(){const e=document.querySelector("#LinkInBioViewEditScreen");e&&$.ajax({url:e.value,type:"GET",dataType:"json",success:e=>{$("#descriptionPageValue").text(e.description),$("#titelpageValue").text(e.title);const t=$("#urlSocialProfilesContainer");t.empty(),e.links.url_social_profiles.forEach((e=>{const o=`\n                        <li>\n                            <a href="${e.url_social}">\n                                <i class="fa-brands ${e.icon}"></i>\n                            </a>\n                        </li>\n                        `;t.append(o)}));const o=$("#linkInBioLinksContainer");o.empty(),e.links.link_in_bio_links.forEach((e=>{const t=`\n                            <a class="link-page-btn link-btn-color d-none" href="http://127.0.0.1:8000/${e.lang}/${e.url}">${e.link_text}</a>\n                        `;o.append(t)})),setTimeout((()=>{o.removeClass("d-none")}),500);const n=document.querySelectorAll(".link-page-btn");o.removeClass("d-none"),n.forEach((function(e){setTimeout((()=>{e.classList.remove("d-none")}),1500)}))},error:(e,t,o)=>{console.error("Fehler:",o)}})}SortableUlrSocial(){const e=this,t=document.getElementById("elementContainer");$(t).sortable({axis:"y",update:function(t,o){const n=$(this).find(".sortable-item").map((function(){return $(this).attr("data-id")})).get();console.log("Aktualisierte Reihenfolge:",n),e.sorttabelSaveUrlSocial(n)}}),$(t).disableSelection()}sorttabelSaveUrlSocial(e){const t=document.querySelector("#SocialMediaProfilesOrderSaveView").value;t&&$.ajax({url:t,type:"POST",data:{sorted_links:e},headers:{"X-CSRFToken":this.csrftoken},success:function(e){console.log("Reihenfolge erfolgreich gespeichert."+e.sorted_links)},error:function(e,t,o){console.error("Fehler beim Speichern der Reihenfolge:",o)}})}socialplattformEmpty(){const e=document.querySelector("#getSocialMdiaPlatforms");if(e&&e){const t=$("#linkinbio_page_id_custome").val();$.ajax({url:e.value,type:"GET",data:{link_in_bio_page_id:t},dataType:"json",success:function(e){0===e.platforms.length?document.querySelector("#addElementButton").style.display="none":document.querySelector("#addElementButton").style.display="block"},error:function(e,t,o){console.error("Fehler:",o)}})}}},i=class{constructor(){this.csrftoken=e("csrftoken"),this.jsonData={},this.customeSetitngsAjax(),this.event()}event(){}saveColorChange(e,t){if("colorButton"===e){const e="link-page-btn",o="default",n="background-color",i=t;this.sendCssSettingsToServer(e,o,n,i)}else if("colorButtonText"===e){const e="link-page-btn",o="default",n="color",i=t;this.sendCssSettingsToServer(e,o,n,i)}else if("colorButtonHover"===e){const e="link-page-btn",o="hover",n="background-color",i=t;this.sendCssSettingsToServer(e,o,n,i)}else if("colorButtonHoverText"===e){const e="link-page-btn",o="hover",n="color",i=t;this.sendCssSettingsToServer(e,o,n,i)}else if("colorIcon"===e){const e="fa-brands",o="default",n="color",i=t;this.sendCssSettingsToServer(e,o,n,i)}else if("colorIconHover"==e){const e="fa-brands",o="hover",n="color",i=t;this.sendCssSettingsToServer(e,o,n,i)}else if("colorTextTitel"==e){const e="titel",o="default",n="color",i=t;this.sendCssSettingsToServer(e,o,n,i)}else{const e="description",o="default",n="color",i=t;this.sendCssSettingsToServer(e,o,n,i)}}createColorPicker(){for(const e in this.jsonData){const t=this.jsonData[e],o=document.getElementById(e);o&&(o.value=t,o.addEventListener("change",(t=>{const o=t.target.value;this.saveColorChange(e,o)})))}}sendCssSettingsToServer(e,t,o,i){const r=this,s=document.querySelector("#CustomSettingsUpdateView");$.ajax({url:s.value,method:"POST",data:{class_name:e,state:t,property_name:o,property_value:i},headers:{"X-CSRFToken":this.csrftoken},success:e=>{this.adjustmentSocial=new n,r.adjustmentSocial.linkinbioEditScrenn(),r.customeSetitngsAjax()},error:function(e){console.error("Fehler beim Senden an den Server:",e)}})}customeSetitngsAjax(){const e=this,t=document.querySelector("#CustomSettingsView");if(!t)return;const o=document.querySelector("#pageOne"),n=document.querySelector(".loader-image-mobile");o.classList.add("d-none"),t&&(n.classList.remove("d-none"),setTimeout((()=>{$.ajax({url:t.value,method:"GET",dataType:"json",success:function(t){o.classList.remove("d-none"),n.classList.add("d-none");const i=t["link-page-btn"].default["background-color"],r=t["link-page-btn"].default.color,s=t["link-page-btn"].hover["background-color"],l=t["link-page-btn"].hover.color,a=t["fa-brands"].default.color,c=t["fa-brands"].hover.color,d=t.titel.default.color,u=t.description.default.color;e.jsonData={colorTextTitel:d,colorTextTitelInput:d,colorDescriptionTitel:u,colorDescriptionTitelInput:u,colorButton:i,colorButtonInput:i,colorButtonText:r,colorButtonTextInput:r,colorButtonHover:s,colorButtonHoverInput:s,colorButtonHoverText:l,colorButtonHoverTextInput:l,colorIcon:a,colorIconInput:a,colorIconHover:c,colorIconHoverInput:c},e.createColorPicker();const h=t;for(const e in h){const t=h[e],o=document.getElementsByClassName(e);for(const e of o){const o=t.default;for(const t in o)e.style[t]=o[t];e.addEventListener("mouseenter",(()=>{const o=t.hover;if(o)for(const t in o)e.style[t]=o[t]})),e.addEventListener("mouseleave",(()=>{for(const t in o)e.style[t]=o[t]}))}}},error:function(e){console.error("Fehler beim Abrufen der Einstellungen:",e)}})}),2e3))}},r=class{constructor(){this.profileImageValue=document.querySelector("#ProfileImageDetailView")?.value||"",this.event()}event(){this.profileImageValue&&this.profileImageView(this.profileImageValue)}profileImageView(e){const t=document.getElementById("profileImage"),o=document.querySelector(".page-image");$.ajax({url:e,type:"GET",dataType:"json",success:e=>{const n=e[0].profile_image;t.src=n,o.src=n},error:(e,t,o)=>{console.error("Fehler:",o)}})}},s=(e("csrftoken"),new class{constructor(){this.createOpenCloseForm=document.querySelector("#createOpenCloseForm"),this.createlinkinbio=document.querySelector("#createlinkinbio"),this.formCreateShorcode=document.querySelector("#form-create-shorcode"),this.formCreateLinkSelect=document.querySelector("#form-create-link-select"),this.linkUrlSubmit=document.querySelector("#linkUrlSubmit"),this.shortcodeInput=document.querySelector("#selectShortcode"),this.buttonLabelInput=document.querySelector("#buttonLabelSelcetSubmit"),this.selectShortcodeInput=document.querySelector("#selectShortcode"),this.csrftoken=e("csrftoken"),this.event()}event(){const e=document.querySelector("#form-create-shorcode"),t=document.querySelector("#createOpenCloseForm"),o=document.querySelector("#createSearch"),n=document.querySelector("#form-create-link-select"),i=document.querySelector("#linkUrlSubmit"),r=document.querySelector("#selectShortcode"),s=document.querySelector("#buttonLabelSelcetSubmit"),l=document.querySelector("#selectShortcode");t&&this.createOpenCloseForm.addEventListener("click",this.opencrateform.bind(this)),e&&document.querySelector("#createShorcode").addEventListener("change",this.handleShorcodeUpdateChange.bind(this)),o&&document.querySelector("#createSearch").addEventListener("change",this.handleSearchUpdateChange.bind(this)),n&&this.formCreateLinkSelect.addEventListener("submit",this.cratelinkInBioSelectSubmit.bind(this)),e&&this.formCreateShorcode.addEventListener("submit",this.createLinkInBioSubmit.bind(this)),i&&this.linkUrlSubmit.addEventListener("keyup",this.eventHandlerUrlChecke.bind(this)),r&&this.shortcodeInput.addEventListener("keyup",this.AutocompleteShorcdcode.bind(this)),s&&this.buttonLabelInput.addEventListener("input",this.checkInputs.bind(this)),l&&this.selectShortcodeInput.addEventListener("input",this.checkInputs.bind(this))}createLinkInBioSubmit(e){e.preventDefault();const r=this,s=document.querySelector("#buttonLabelSubmit"),l=document.querySelector("#linkUrlSubmit"),a=document.querySelector("#linkInBioPageID"),c=this.formCreateShorcode.getAttribute("action"),d=s.value,u=l.value,h=a.value,m=new FormData;m.append("button_label",d),m.append("link_url",u),m.append("linkinbio_page",h),this.linkList=new t,this.adjustmentSocial=new n,this.adjustmentColor=new i,$.ajax({type:"POST",url:c,data:m,processData:!1,contentType:!1,headers:{"X-CSRFToken":this.csrftoken},success:e=>{s.value="",l.value="",o(translations["Der Link wurde erfolgreich erstellt und mit Ihrer Link-in-Bio-Seite verknüpft."]),document.querySelector("#buttonCrateShortcode").classList.add("disabled"),document.querySelector(".url-chacke-feedback").textContent="",r.linkList.linklistview(),r.adjustmentSocial.linkinbioEditScrenn(),r.adjustmentColor.customeSetitngsAjax()},error:function(e,t,o){console.error("Fehler:",t,o)}})}cratelinkInBioSelectSubmit(e){e.preventDefault();const t=this,n=this.formCreateLinkSelect.getAttribute("action"),i=document.querySelector("#buttonLabelSelcetSubmit"),r=document.querySelector("#linkinbio_page_id"),s=document.querySelector("#shortcode_id"),l=r.value,a=i.value,c=s.value,d=new FormData;d.append("button_label",a),d.append("shortcode_id",c),d.append("linkinbio_page_id",l),$.ajax({type:"POST",url:n,data:d,contentType:"application/json",headers:{"X-CSRFToken":this.csrftoken},processData:!1,contentType:!1,success:function(e){i.value="",r.value="",s.value="",$("#selectShortcode").val(""),o(translations["Der neue Shortcode wurde erfolgreich erstellt und mit Ihrer Link-in-Bio-Seite verknüpft."]),document.querySelector("#buttonCrateSelectShortcode").classList.add("disabled"),t.linkList.linklistview()},error:function(e,t,o){console.log("Fehler beim Senden des Formulars: "+o)}})}checkInputs(){const e=this.buttonLabelInput.value.trim(),t=this.selectShortcodeInput.value.trim();""===e&&""!==t||""!==e&&""===t||""===e&&""===t?document.querySelector("#buttonCrateSelectShortcode").classList.add("disabled"):document.querySelector("#buttonCrateSelectShortcode").classList.remove("disabled")}AutocompleteShorcdcode(){const e=document.querySelector("#search-results"),t=document.querySelector("#valueUrlShotcodeAutocomplete"),o=document.querySelector("#linkinbio_page_id"),n=t.value,i=o.value;this.shortcodeInput.value.length>2&&$.ajax({url:n,type:"GET",data:{link_in_bio_page_id:i,search_term:this.shortcodeInput.value},headers:{"X-CSRFToken":this.csrftoken},success:function(t){$(this.searchResultsDiv).empty(),t.forEach((t=>{const o=$("<li>");o.text(t.url_titel),o.attr("data-id",t.id),$(e).append(o)})),this.shortcodeInput=$("#shortcode_id"),$(e).on("click","li",(function(){const t=$(this).text(),o=$(this).attr("data-id");$("#selectShortcode").val(t),$("#shortcode_id").val(o),$(e).empty()}))},error:function(e){console.error("Error:",e)}})}isValidURL(e){return/^(http|https):\/\/([\w-]+\.)+[\w-]+(\/[\w-./?%&=]*)?$/.test(e)}eventHandlerUrlChecke(){const e=linkUrlSubmit.value,t=document.querySelector(".url-chacke-feedback");if(this.isValidURL(e)){if(!t||"Looks good!"!==t.textContent){if(t)t.textContent="Looks good!",t.style.color="#198754";else{const e=document.createElement("div");e.className="url-chacke-feedback mb-3",e.textContent="Looks good!",e.style.color="#198754",document.querySelector("#linkInBioPageID").insertAdjacentElement("afterend",e)}document.querySelector("#buttonCrateShortcode").classList.remove("disabled")}}else if(!t||"none valid"!==t.textContent){if(t)t.textContent="none valid",t.style.color="#dc3545";else{const e=document.createElement("div");e.className="url-chacke-feedback mb-3",e.textContent="none valid",e.style.color="#dc3545",document.querySelector("#linkInBioPageID").insertAdjacentElement("afterend",e)}document.querySelector("#buttonCrateShortcode").classList.add("disabled")}}opencrateform(){this.createlinkinbio.classList.contains("d-none")?this.createlinkinbio.classList.remove("d-none"):this.createlinkinbio.classList.add("d-none")}handleShorcodeUpdateChange(){document.querySelector("#createShorcode").checked&&(this.formCreateShorcode.classList.remove("d-none"),this.formCreateLinkSelect.classList.add("d-none"),document.querySelector("#createSearch").checked=!1)}handleSearchUpdateChange(){document.querySelector("#createSearch").checked&&(this.formCreateShorcode.classList.add("d-none"),this.formCreateLinkSelect.classList.remove("d-none"),document.querySelector("#createShorcode").checked=!1)}},new class{constructor(){this.csrftoken=e("csrftoken"),this.event()}event(){const e=document.querySelector("#card-container"),t=document.querySelector("#card-container-form"),o=document.querySelector("#urlDestinationUpdate");t&&(t.addEventListener("submit",this.handleSubmitClick.bind(this)),t.addEventListener("keyup",(e=>{e.target===o&&this.autoCompleteShorcdcode()}))),e&&(e.addEventListener("click",this.handleUpdateSwicht.bind(this)),e.addEventListener("click",this.handleEditcardClick.bind(this)))}ajaxDatile(e){const t=document.getElementById("viewUrlLinks").value.replace(/0/g,e),o=document.querySelector("#buttonLabel"),n=document.querySelector("#urlDestinationUpdate"),i=document.querySelector(".updateformlink"),r=(i.getAttribute("data-update-form"),document.querySelector("#shortcodeId")),s=document.querySelector("#linkInBioPageIdValue");$.ajax({url:t,type:"GET",dataType:"json",headers:{"X-CSRFToken":this.csrftoken},success:function(e){console.log(e),o.value=e.button_label,n.value=e.url_destination,i.dataset.urlUpdateFormId=e.id,r.value=e.shortcode_id,s.value=e.id},error:function(){console.log("Fehler beim Abrufen der Daten")}})}updateLinkForm(){document.getElementById("linkInBioCardAddForm").classList.remove("d-none")}updateSwicht(e){const t=document.getElementById("swichtupdate").value.replace(/0/g,e);$.ajax({url:t,type:"POST",dataType:"json",headers:{"X-CSRFToken":this.csrftoken},success:e=>{o(e.message)},error:(e,t,o)=>{console.error("Fehler:",o)}})}handleUpdateSwicht(e){const t=e.target.closest(".linkinbio-switch");if(t){const e=t.getAttribute("data-linkinbio-switch");this.updateSwicht(e)}}handleEditcardClick(e){const t=e.target.closest(".linkinbio-editcard");if(t){const e=t.getAttribute("data-linkinbio-editcard");this.updateLinkForm(),this.ajaxDatile(e)}}handleSubmitClick(e){e.preventDefault();const t=document.querySelector(".updateformlink").getAttribute("data-url-update-form-id");this.updateFormLinkinBio(t)}updateFormLinkinBio(e){const n=this;this.linkList=new t;const i=document.getElementById("updateUrl").value.replace(/0/g,e),r=document.querySelector("#buttonLabel"),s=r.value,l=document.querySelector("#urlDestinationUpdate"),a=l.value,c=document.querySelector("#shortcodeId"),d=c.value,u=new FormData;u.append("button_label",s),u.append("url_destination",a),u.append("shortcode_id",d),$.ajax({url:i,type:"POST",data:u,contentType:"application/json",processData:!1,contentType:!1,headers:{"X-CSRFToken":this.csrftoken},success:function(e){document.querySelector("#linkInBioCardAddForm").classList.add("d-none"),r.value="",l.value="",c.value="",n.linkList.linklistview(),o(translations["Dein link wurde gespeicher."])},error:function(e){console.log("Fehler bei der AJAX-Anfrage: "+e.statusText)}})}isValidURL(e){return/^(http|https):\/\/([\w-]+\.)+[\w-]+(\/[\w-./?%&=]*)?$/.test(e)}urlCheckenNew(e){const t=document.querySelector(".url-chacke-feedback");if(this.isValidURL(e)){if(!t||"Looks good!"!==t.textContent){if(t)t.textContent="Looks good!",t.style.color="#198754";else{const e=document.createElement("div");e.className="url-chacke-feedback mb-3",e.textContent="Looks good!",e.style.color="#198754",document.querySelector("#shortcodeId").insertAdjacentElement("afterend",e)}document.querySelector("#buttonCrateShortcode").classList.remove("disabled")}}else if(!t||"none valid"!==t.textContent){if(t)t.textContent="none valid",t.style.color="#dc3545";else{const e=document.createElement("div");e.className="url-chacke-feedback mb-3",e.textContent="none valid",e.style.color="#dc3545",document.querySelector("#shortcodeId").insertAdjacentElement("afterend",e)}document.querySelector("#buttonCrateShortcode").classList.add("disabled")}}autoCompleteShorcdcode(){document.querySelector(".updateformlink").getAttribute("data-url-update-form-id");const e=document.querySelector("#urlDestinationUpdate"),t=e.value;this.urlCheckenNew(t);const o=document.querySelector("#linkInBioPageId").value,n=(document.querySelector("#shortcodeId").value,document.querySelector("#search-results-update")),i=document.querySelector("#valueUrlShotcodeAutocomplete").value;t.length>2&&$.ajax({url:i,type:"GET",data:{link_in_bio_page_id:o,search_term:t},headers:{"X-CSRFToken":this.csrftoken},success:function(t){$(this.searchResultsDiv).empty(),t.forEach((e=>{const t=$("<li>");t.text(e.url_titel),t.attr("data-id",e.id),$(n).append(t)})),this.shortcodeInput=$("#shortcodeId"),$(n).on("click","li",(function(){const t=$(this).text(),o=$(this).attr("data-id");$(e).val(t),$("#shortcodeId").val(o),$(n).empty()}))},error:function(e){console.error("Error:",e)}})}},new class{constructor(){this.linkList=new t,this.csrftoken=e("csrftoken"),this.event()}event(){const e=document.querySelector("#card-container");e&&e.addEventListener("click",(e=>{this.handlerOpenModal(e)}));const t=document.querySelector(".modal-close");t&&t.addEventListener("click",this.handlerCloseModal.bind(this));const o=document.querySelector(".btn-trash");o&&o.addEventListener("click",(e=>{this.deleteLinkInBio(e)}))}handlerOpenModal(e){const t=e.target.closest(".linkinbio-trash");if(t.classList.contains("linkinbio-trash")){$("#exampleModal").modal("show");const e=t.getAttribute("data-url-trash"),o=t.getAttribute("data-linkinbio-editcard"),n=t.getAttribute("data-linkinbio-titel");document.querySelector("#exampleModalLabel").textContent=n;const i=document.querySelector("#idContent"),r=document.createElement("p");r.textContent=' Möchten Sie" '+n+' "Löschen',$(i).append(r);const s=document.querySelector(".modal-footer .btn-trash");s.setAttribute("data-url-trash",e),s.setAttribute("data-linkinbio-editcard",o)}}handlerCloseModal(){const e=document.querySelector("#exampleModalLabel");e&&($("#exampleModal").modal("hide"),e.textContent="",document.querySelector("#idContent").innerHTML="")}deleteLinkInBio(e){e.preventDefault();const r=this;this.linkList=new t,this.adjustmentSocial=new n,this.adjustmentColor=new i;const s=e.target.closest(".btn-trash");if(s.classList.contains("btn-trash")){const e=s.getAttribute("data-url-trash");console.log(e),$.ajax({url:e,type:"POST",dataType:"json",headers:{"X-CSRFToken":this.csrftoken},success:e=>{console.log("Antwort von Server:",e),document.querySelector("#exampleModalLabel").textContent="",document.querySelector("#idContent").textContent="",$("#exampleModal").modal("hide"),r.linkList.linklistview(),r.adjustmentSocial.linkinbioEditScrenn(),r.adjustmentColor.customeSetitngsAjax(),o(e.message)},error:function(e,t,o){console.error("Fehler bei der Ajax-Anfrage:",o)}})}}},new class{constructor(){this.csrftoken=e("csrftoken"),this.event()}event(){const e=document.querySelectorAll(".update-linkinbio-page");e&&e.forEach((e=>{e.addEventListener("click",(e=>{this.openFormData(e)}))}));const t=document.querySelectorAll("#updateBtnJson");t&&t.forEach((e=>{e.addEventListener("click",(e=>{this.updateFormLinkinbio(e)}))}))}openFormData(e){const t=e.target.closest(".update-linkinbio-page");if(t.classList.contains("update-linkinbio-page")){const e=t.getAttribute("data-linkinbio-page-id"),o=document.getElementById("linkinbioJson").value.replace(/0/g,e),n=document.querySelector("#id_title"),i=document.querySelector("#id_description"),r=document.querySelector("#linkinbioUpdateId");$.ajax({url:o,type:"GET",dataType:"json",headers:{"X-CSRFToken":this.csrftoken},success:function(e){n.value=e.id_title,i.value=e.id_description,r.value=e.id,document.querySelector("#updateBtnJson").classList.remove("d-none"),document.querySelector("#saveBtn").classList.add("d-none"),document.querySelector("#aside-form").classList.add("toggle"),document.querySelector("#overlay-open").classList.add("overlay-open")},error:function(e,t,o){console.error("Fehler bei der Ajax-Anfrage:",o)}})}}updateFormLinkinbio(e){e.preventDefault();const t=document.querySelector("#id_title").value,n=document.querySelector("#id_description").value,i=document.querySelector("#linkinbioUpdateId").value,r=document.getElementById("linkinbioUpdateJson").value.replace(/0/g,i);console.log("url ",r),console.log("Bes ",n),console.log("Tite ",t);const s=new FormData;s.append("id_title",t),s.append("id_description",n),$.ajax({url:r,type:"POST",data:s,processData:!1,contentType:!1,headers:{"X-CSRFToken":this.csrftoken},success:function(e){console.log("Antwort von Server:",e.message),document.querySelector("#aside-form").classList.remove("toggle"),document.querySelector("#overlay-open").classList.remove("overlay-open"),o(e.message),setTimeout((function(){location.reload()}),300)},error:function(e,t,o){console.error("Fehler bei der Ajax-Anfrage:",o)}})}},new class{constructor(){this.csrftoken=e("csrftoken"),this.event()}event(){const e=document.querySelectorAll(".delete-linkinbio-page");e&&e.forEach((e=>{e.addEventListener("click",(e=>{this.openModalDeleteForm(e)}))}));const t=document.querySelector(".btn-delete");t&&t.addEventListener("click",(e=>{this.delteModelForm(e)}))}openModalDeleteForm(e){const t=e.target.closest(".delete-linkinbio-page");if(console.log(t),t.classList.contains("delete-linkinbio-page")){const e=t.getAttribute("data-linkinbio-page-delete-id"),o=t.getAttribute("data-linkinbio-page-titel"),n=(document.querySelectorAll("#linkinbioDeleteJson"),document.getElementById("linkinbioDeleteJson").value.replace(/0/g,e));$("#exampleModalDelete").modal("show");const i=document.querySelector("#idContent"),r=document.createElement("p");r.textContent=' Möchten Sie" '+o+' "Löschen',document.querySelector(".modal-footer .btn-delete").setAttribute("data-url-delete",n),$(i).append(r)}}delteModelForm(e){const t=e.target.closest(".btn-delete");if(t.classList.contains("btn-delete")){const e=t.getAttribute("data-url-delete");$.ajax({url:e,type:"POST",dataType:"json",headers:{"X-CSRFToken":this.csrftoken},success:function(e){console.log("Antwort von Server:",e),$("#exampleModal").modal("hide"),o(e.message),setTimeout((function(){location.reload()}),300)},error:function(e,t,o){console.error("Fehler bei der Ajax-Anfrage:",o)}})}}},new class{constructor(){this.cropperContainer=document.getElementById("cropper-container"),this.cropperImage=document.getElementById("cropper-image"),this.cropper,this.csrftoken=e("csrftoken"),this.event(),this.cropper}event(){const e=document.querySelector("#openMoadlImage");e&&e.addEventListener("click",this.openModalImage.bind(this));const t=document.getElementById("image-input");t&&t.addEventListener("change",(e=>{this.imageInputCropping(e)}));const o=document.querySelector("#crop-button");o&&o.addEventListener("click",(e=>{this.imageSaveCropper(e)}))}openModalImage(){$("#exampleModalImage").modal("show")}imageInputCropping(e){const t=document.querySelector("#image-input").files[0],o=URL.createObjectURL(t);document.querySelector("#cropper-container").classList.remove("d-none"),this.cropperContainer.innerHTML=`<img src="${o}" id="image" width="700px">`;const n=document.querySelector("#image");this.cropper=new Cropper(n,{aspectRatio:1,crop:function(e){console.log(e.detail.x),console.log(e.detail.y),console.log(e.detail.width),console.log(e.detail.height),console.log(e.detail.rotate),console.log(e.detail.scaleX),console.log(e.detail.scaleY)}})}imageSaveCropper(){this.cropper?this.cropper.getCroppedCanvas().toBlob((e=>{if(e){const t=document.querySelector("#ImageProfileAdjustment");if(t){const n=new FormData,i=`image_${Math.floor(1e6*Math.random())}.png`;n.append("image",e,i),$.ajax({type:"POST",url:t.value,enctype:"multipart/form-data",data:n,headers:{"X-CSRFToken":this.csrftoken},success:function(e){o(e.message),$("#exampleModalImage").modal("hide"),this.profileImageView=new r,document.querySelector("#image-input").value="",document.querySelector("#cropper-container").classList.add("d-none")},error:function(e){console.log("error",e)},contentType:!1,processData:!1})}else console.error('Element mit ID "ImageProfileAdjustment" nicht gefunden.')}else console.error("Fehler beim Erstellen des Blob für das Bild.")}),"image/png"):console.error("Bild-Element nicht gefunden.")}},new class{constructor(){this.csrftoken=e("csrftoken"),this.event()}event(){const e=document.querySelector("#openModelDelte");e&&e.addEventListener("click",(e=>{this.openDeleteModalImage(e)}));const t=document.querySelector("#imageProfileDeleteBtn");t&&t.addEventListener("click",(e=>{this.profileImageDelete(e)}))}openDeleteModalImage(){console.log("Run Model"),$("#exampleModalImageDelete").modal("show")}profileImageDelete(e){const t=document.querySelector("#ImageProfileAdjustment"),o=new Blob([""],{type:"image/png"}),n=new FormData;n.append("image",o,"profile_image.png"),$.ajax({type:"POST",url:t.value,enctype:"multipart/form-data",data:n,headers:{"X-CSRFToken":this.csrftoken},success:function(e){console.log("success",e)},error:function(e){console.log("error",e)},contentType:!1,processData:!1})}},new r,new class{constructor(){this.csrftoken=e("csrftoken"),this.inputFieldTitel=document.getElementById("formGroupTitelInput"),this.charCountTitel=document.getElementById("charCountTitel"),this.inputFieldTitel&&this.inputFieldTitel.addEventListener("input",(e=>{this.typingLengthTitel(e)})),this.inputFieldDescription=document.getElementById("formdescriptionInput"),this.charCount=document.getElementById("charCount"),this.inputFieldDescription&&this.inputFieldDescription.addEventListener("input",(e=>{this.typingLengthDescription(e)})),this.titelPageValue=document.querySelector("#titelpageValue"),this.descriptionPageValue=document.querySelector("#descriptionPageValue"),this.inputFieldDescription&&descriptionPageValue&&this.inputFieldDescription.addEventListener("input",(()=>{this.valueDescriptionTransferred()})),this.inputFieldTitel&&this.titelPageValue&&this.inputFieldTitel.addEventListener("input",(()=>{this.valueTransferred()})),this.textSaveBtn=document.querySelector("#textSaveBtn"),this.textSaveBtn&&textSaveBtn.addEventListener("click",(()=>{this.saveTextDescription()})),this.event()}event(){document.querySelector("#TexteDeatileAdjustmentView")&&this.detaileViewText()}detaileViewText(){const e=document.querySelector("#TexteDeatileAdjustmentView");$.ajax({url:e.value,type:"GET",dataType:"json",success:e=>{this.titelPageValue.textContent=e[0].title,this.inputFieldTitel.value=e[0].title,this.inputFieldDescription.value=e[0].description,this.descriptionPageValue.textContent=e[0].description},error:(e,t,o)=>{console.error("Fehler:",o)}})}saveTextDescription(){const e=document.querySelector("#TexteCreateAdjustmentView"),t=this.inputFieldTitel.value,n=this.inputFieldDescription.value,i=new FormData;i.append("title",t),i.append("description",n),$.ajax({type:"POST",url:e.value,data:i,processData:!1,contentType:!1,headers:{"X-CSRFToken":this.csrftoken},success:function(e){console.log(e),o(e.message)},error:function(e,t,o){console.error("Fehler:",t,o)}})}typingLengthTitel(){const e=this.inputFieldTitel.value;34-e.length<0?(this.inputFieldTitel.value=e.slice(0,34),this.charCountTitel.textContent="34 / 34 characters"):this.charCountTitel.textContent=e.length+" / 34 characters"}typingLengthDescription(){const e=this.inputFieldDescription.value;34-e.length<0?(this.inputFieldDescription.value=e.slice(0,80),this.charCount.textContent="80 / 80 characters"):this.charCount.textContent=e.length+" / 80 characters"}valueTransferred(){const e=this.inputFieldTitel.value;this.titelPageValue.textContent=e}valueDescriptionTransferred(){const e=this.inputFieldDescription.value;this.descriptionPageValue.textContent=e}},new n,new i,new class{constructor(){}},document.querySelector("#openForm")),l=document.querySelector("#closeForm");s&&s.addEventListener("click",(function(){document.querySelector("#aside-form").classList.add("toggle"),document.querySelector("#overlay-open").classList.add("overlay-open");const e=document.querySelector("#id_template_name");e.style.borderColor="#dc3545",e.addEventListener("change",(()=>{e.style.borderColor=""}))})),l&&l.addEventListener("click",(function(){document.querySelector("#aside-form").classList.remove("toggle"),document.querySelector("#overlay-open").classList.remove("overlay-open")}))})();